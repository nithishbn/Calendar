#: import NoTransition kivy.uix.screenmanager.NoTransition
#: import webbrowser webbrowser
#: import Animation kivy.animation.Animation
#:import MDTextField kivymd.textfields.MDTextField
#:import MDLabel kivymd.label.MDLabel
#:import MDRaisedButton kivymd.button.MDRaisedButton
#:import colors kivymd.color_definitions.colors
#:import Toolbar kivymd.toolbar.Toolbar
#:import NavigationLayout kivymd.navigationdrawer.NavigationLayout
#:import MDNavigationDrawer kivymd.navigationdrawer.MDNavigationDrawer
#:import NavigationLayout kivymd.navigationdrawer.NavigationLayout
#:import NavigationDrawerDivider kivymd.navigationdrawer.NavigationDrawerDivider
#:import NavigationDrawerToolbar kivymd.navigationdrawer.NavigationDrawerToolbar
#:import NavigationDrawerSubheader kivymd.navigationdrawer.NavigationDrawerSubheader
#:import MDSeparator kivymd.card.MDSeparator
#:import MDCard kivymd.card.MDCard
# :import NDIconLabel kivymd.navigationdrawer.NDIconLabel
#:import OneLineIconListItem kivymd.list.OneLineIconListItem
#:import SmartTile kivymd.grid.SmartTile
#: import softinput_mode kivy.core.window.Window
#:import MDList kivymd.list.MDList
#:import datetime datetime.datetime
Navigation:
    ScreenManager:
        id: sm
        MenuScreen:
            name: 'MenuScreen'
            id: menu
            manager: sm
            transition: NoTransition

        DateScreen:
            name: 'DateScreen'
            id: date
            manager: sm
            transition: "NoTransition"

        DetailsScreen:
            name: 'DetailsScreen'
            id: details
            manager: sm
            date: date.date
            count: date.count

        ConstructionScreen:
            name: 'ConstructionScreen'
            id: construction
            manager: sm


        ContactScreen:
            name: 'ContactScreen'
            id: contact
            manager: sm

        GalleryScreen:
            name: 'GalleryScreen'
            id: gallery



<Navigation>:
    id: nav_layout
    pos_hint: {'top': 1}
    MDNavigationDrawer:
        pos_hint: {'top': 1}
        id: nav_drawer
        NavigationDrawerToolbar:
            #
            title: "Navigation"
        NavigationDrawerIconButton:
            # icon: 'home-outline'
            icon: 'home'
            text: "Home"
            on_release:
                app.root.ids.sm.transition = NoTransition()

                root.onNextScreen(app.root.ids.sm.current,"MenuScreen")

        NavigationDrawerIconButton:
            icon: 'calendar-today'
            text: "Calendar"
            # badge_text: '99+'
            on_release:
                app.root.ids.sm.transition = NoTransition()
                root.onNextScreen(app.root.ids.sm.current,"DateScreen")
        NavigationDrawerIconButton:
            # icon: 'checkbox-blank-circle'
            icon: 'image'
            text: "Gallery"
            on_release:
                app.root.ids.sm.transition = NoTransition()
                root.onNextScreen(app.root.ids.sm.current,"GalleryScreen")
        NavigationDrawerIconButton:
            # icon: 'checkbox-blank-circle'
            icon: 'contact-mail'
            text: "Contact"
            on_release:
                app.root.ids.sm.transition = NoTransition()
                root.onNextScreen(app.root.ids.sm.current,"ContactScreen")
        # NavigationDrawerSubheader:
        #     text: "More"
        NavigationDrawerDivider
        # Spacer:
        NavigationDrawerIconButton:
            icon: 'credit-card'
            text: 'Donate'
            active_color_type: 'accent'
            on_release: webbrowser.open("https://www.lvtemple.org/new-donations/", autoraise=True)


<MenuScreen>:
    BoxLayout:
        id: hello
        orientation: 'vertical'
        # spacing:
        BoxLayout:
            size_hint_y: 0.15
            AToolbar

        ScrollView:
            width: root.width
            pos_hint: {'top':1.0}
            BoxLayout:
                # pos_hint: {'top':0.95}
                orientation: 'vertical'
                size_hint_y: None
                height: Window.height *1.5
                spacing: 15
                padding: 0,15,0,50
                MDCard:
                    size_hint: 0.9, 0.85
                    pos_hint: {'top' :1,'center_x': 0.5}
                    elevation: 10
                    active_color_type: 'Custom'
                    active_color : [1, 0, 1, 1]
                    BoxLayout:
                        id: notes
                        orientation:'vertical'
                        padding: 10, 0, 8, 35
                        spacing: 15
                        MDLabel:
                            text: "Today's Events"
                            theme_text_color: 'Primary'
                            font_style:"Headline"
                            size_hint_y: None
                            height: dp(35)
                            # halign: 'center'
                            # padding: 50
                        MDSeparator:
                            height: dp(2)
                            # padding: 50
                            spacing: 10
                        Image:
                            mipmap: True
                            source: './images/god.jpg'
                        MDList:
                            id: notesList
                            # pos_hint:{'x':0.05}
                            halign: 'left'
                            spacing: 15
                            size_hint_y: 0.2

                MDCard:
                    size_hint: 0.8, 0.85
                    pos_hint: {'top' :1,'center_x': 0.5}
                    elevation: 10
                    # active_color_type: 'Custom'
                    # # active_color : [1, 0, 1, 1]
                    # active_color: app.theme_cls.primary_color

                    BoxLayout:
                        id: labels
                        orientation: 'vertical'
                        padding: 8, 0, 8, 35
                        spacing: 15
                        MDLabel:
                            text: "Details"
                            theme_text_color: 'Primary'
                            # text_color: app.theme_cls.accent_color
                            font_style:"Headline"
                            size_hint_y: None
                            height: dp(35)

                        MDSeparator:
                            height: dp(2)
                            # padding: 50
                            spacing: 10
                            # theme_text_color: 'Custom'
                            md_bg_color: app.theme_cls.accent_color

        # ScrollLabel:
        #     id: scrolllabelthing
        #     size_hint_y: 0.12
<GalleryScreen>:
    BoxLayout:
        orientation: 'vertical'

        # size_hint_y: None
        # spacing: 40
        pos_hint: {'top': 1}
        BoxLayout:
            size_hint_y:0.15
            AToolbar
        RelativeLayout:
            MDCard:
                size_hint: 0.8, 0.85
                pos_hint: {'top' :1,'center_x': 0.5}
                elevation: 1
                active_color_type: 'Custom'
                active_color : [1, 0, 1, 1]
                BoxLayout:
                    orientation:'vertical'
                    padding: dp(8)
                    spacing: 15
                    MDLabel:
                        text: "Photos"
                        theme_text_color: 'Secondary'
                        font_style:"Display1"
                        size_hint_y: None
                        height: dp(35)
                        # halign: 'center'
                        # padding: 50
                    MDSeparator:
                        height: dp(1)
                        # padding: 50
                        spacing: 10
                    Image:
                        mipmap: True
                        size_hint: 1, 0.7
                        source: root.imagefile
                    GridLayout:
                        rows: 1
                        cols: 2
                        spacing: 10
                        pos_hint: {'center_x': 0.50, 'top': 0.5}
                        size_hint: 0.25, 0.1
                        MDRaisedButton:
                            text: "Previous"
                            # size_hint: None, None
                            on_release:
                                root.previous_image()
                        MDRaisedButton:
                            text: "Next"
                            on_release:
                                root.next_image()
                    MDLabel:
                        text: str(root.count + 1) + "/" + str(root.lengthoflist + 1)
                        pos_hint: {'x': 0.1}


<DateScreen>:
    BoxLayout:
        orientation: 'vertical'
        # spacing: 15
        pos_hint: {'top': 1}
        BoxLayout:
            size_hint_y: 0.15
            AToolbar
        RelativeLayout:

            MDRaisedButton:
                pos_hint: {'center_x':0.5, 'center_y':0.75}
                text: "Show Calendar"
                on_press: root.show_date_picker()

<DetailsScreen>:
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            size_hint_y: 0.15
            AToolbar
        ScrollView:
            width: root.width
            BoxLayout:
                id: holder
                orientation: 'vertical'
                # padding: [100, 100]
                padding: dp(15)
                pos_hint: {'top': 0.85}
                orientation: 'vertical'
                size_hint_y: None
                height: Window.height *1.25
                spacing: 15
                padding: 0,15,0,50
                MDCard:
                    id: events
                    size_hint: 0.8, 0.30
                    pos_hint: {'top' :1,'center_x': 0.5}
                    elevation: 10
                    active_color_type: 'Custom'
                    active_color : [1, 0, 1, 1]
                    BoxLayout:
                        orientation: 'vertical'
                        id: notes
                        padding: 8, 0, 8, 35

                        MDLabel:
                            text: root.date
                            # theme_text_color: 'Secondary'
                            font_style:"Headline"
                            size_hint_y: None
                            # width: dp(500)
                            width: root.width
                            height: dp(35)
                            spacing: 10

                        MDSeparator:
                            height: dp(2)
                            # padding: 50
                            spacing: 10
                        MDList:
                            id: notesList
                            pos_hint: {'top':0.85}
                            size_hint_y: 0.75
                            spacing: 10
                            padding: 8, 4, 8, 0
                MDCard:
                    id: details
                    size_hint: 0.85, 0.90
                    pos_hint: {'top' :1,'center_x': 0.5}
                    elevation: 10
                    active_color_type: 'Custom'
                    active_color : [1, 0, 1, 1]

                    BoxLayout:
                        id: labels
                        orientation: 'vertical'
                        padding: 8, 0, 8, 35
                        spacing: 10
                        MDLabel:
                            text: "Details"
                            theme_text_color: 'Primary'
                            # text_color: app.theme_cls.accent_color
                            font_style:"Headline"
                            size_hint_y: None
                            height: dp(35)

                        MDSeparator:
                            height: dp(2)
                            # padding: 50
                            spacing: 10
                            # theme_text_color: 'Custom'
                            md_bg_color: app.theme_cls.accent_color


<ContactScreen>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.15
            AToolbar
        RelativeLayout:
            pos_hint: {'top': 0.95, 'center_x': 0.5}
            spacing: 50
            # padding: 50
            MDLabel:
                size_hint_y: 0.01
                pos_hint: {'top': 0.95}
                text: 'Contact Us'
                font_style: 'Display1'
                halign: 'center'
                valign: 'top'
            BoxLayout:

                MDList:
                    pos_hint: {'top':0.9}
                    spacing: 15
                    OneLineIconListItem:
                        text: "Call"
                        on_release: root.call()
                        IconLeftSampleWidget:
                            icon: 'phone'
                            on_release: root.call()
                    OneLineIconListItem:
                        text: "Facebook"
                        on_release: webbrowser.open("https://www.facebook.com/Svetalvtemple/")
                        IconLeftSampleWidget:
                            icon: 'facebook'
                            on_release: webbrowser.open("https://www.facebook.com/Svetalvtemple/")

                    OneLineIconListItem:
                        text: "Email"
                        on_release: webbrowser.open("mailto:info@lvtemple.org")
                        IconLeftSampleWidget:
                            icon: 'email'
                            on_release: webbrowser.open("mailto:info@lvtemple.org")

                    OneLineIconListItem:
                        text: "Directions"
                        on_release: webbrowser.open("https://www.google.com/maps/place/Sri+Lakshmi+Venkateswara+Temple,+Redmond")
                        IconLeftSampleWidget:
                            icon: 'google-maps'
                            on_release: webbrowser.open("https://www.google.com/maps/place/Sri+Lakshmi+Venkateswara+Temple,+Redmond")
                    OneLineIconListItem:
                        text: "Website"
                        on_release: webbrowser.open("https://www.lvtemple.org")
                        IconLeftSampleWidget:
                            icon: 'web'
                            on_release: webbrowser.open("https://www.lvtemple.org")
                    OneLineIconListItem:
                        text: "YouTube Channel"
                        on_release: webbrowser.open("https://www.youtube.com/channel/UCm7YxQAkZFf80ODHxr9Yhdw")
                        IconLeftSampleWidget:
                            icon: 'youtube-play'
                            on_release: webbrowser.open("https://www.youtube.com/channel/UCm7YxQAkZFf80ODHxr9Yhdw")



<ConstructionScreen>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.15
            AToolbar
        MDLabel:
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            halign: 'center'
            valign: 'center'
            text: "This screen is under construction."
            font_style: 'Display4'
            color: [1, 0, 0, 1]
# <Spacer@Widget>:
#     size_hint_x: None
#     width: 400
#
# <ScrollLabel>:
#     GridLayout:
#         rows:1
#         size_hint_x: None
#         width: self.minimum_width
#         # height: self.minimum_height
#         Spacer:
#         Label:
#             size_hint_x: None
#             text: "Today is a great day at the temple"
#             width: self.texture_size[0]
#             # font_style: 'Display2'
#             font_size: 35
#             # font_style: 'Title'
#
#             color: [0, 0, 0, 1]
#         Spacer:
<AToolbar>:
    pos_hint: {'top': 1}
    size_hint_y: 1
    id: toolbar
    title: 'SVETA Temple'
    md_bg_color: app.theme_cls.primary_color
    background_palette: 'Primary'
    background_hue: '500'
    left_action_items: [['menu', lambda x: app.root.toggle_nav_drawer()]]
